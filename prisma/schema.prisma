generator client {
  provider = "prisma-client-js"
  binaryTargets = ["native"]
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Provincia {
  id_provincia  Int @id @default(autoincrement())
  nombre        String @unique @db.VarChar(50)

  direcciones Direccion[]

  @@map("PROVINCIA")
}

model Direccion {
  id_direccion  Int @id @default(autoincrement())
  calle         String @db.VarChar(150)
  numero        String @db.VarChar(10)
  portal        String? @db.VarChar(10)
  piso          String? @db.VarChar(10)
  puerta        String? @db.VarChar(10)
  municipio     String @db.VarChar(150)
  codigo_postal String @db.VarChar(10)

  // FK
  id_provincia  Int
  provincia     Provincia @relation(fields: [id_provincia], references: [id_provincia])
  clientes Cliente[]

  @@map("DIRECCION")
}

model Cliente {
  id_cliente    Int @id @default(autoincrement())
  nombre        String @db.VarChar(100)
  apellidos     String @db.VarChar(150)
  telefono      String @db.VarChar(20)
  email         String @unique @db.VarChar(100)

  id_direccion Int
  direccion Direccion @relation(fields: [id_direccion], references: [id_direccion])

  @@map("CLIENTE")
}